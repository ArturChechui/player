#pragma once

#include <stdint.h>

#include <array>
#include <cstdint>
#include <string>

// TODO: Split to UI-related types and core application model types

namespace common {

struct StationData {
    // TODO: std::string_view?
    std::string id;    // e.g., "radio1_aac_h"
    std::string name;  // e.g., "Radio 1 (AAC High)"
    std::string url;   // streaming URL
};

struct AppModel {
    int selectedStationIndex;
    // TODO: Add other runtime state here (playback status, volume, etc.)
};

struct UiEvent {
    enum class Type { RENDER_STATIONS, RENDER_STATUS, RENDER_BOOT };

    Type type;
    int selectedIndex = 0;  // Current selection for RENDER_STATIONS

    // TODO: union? variants? for other event data
};

// TODO: correct the status kinds
enum class UiStatusKind : uint8_t {
    Booting,
    WifiConnecting,
    WifiConnected,
    WifiError,
    Playing,
    Stopped,
    Error
};

struct UiStatus {
    UiStatusKind kind{UiStatusKind::Booting};
    std::string line1;
    std::string line2;
};

// Custom icons (indices 0-31)
enum class Icon : uint8_t {
    WIFI_OFF = 0,
    WIFI_1 = 1,
    WIFI_2 = 2,
    WIFI_3 = 3,
    PLAY = 4,
    PAUSE = 5,
    STOP = 6,
    SPEAKER = 7,
    BATTERY_EMPTY = 8,
    BATTERY_LOW = 9,
    BATTERY_MID = 10,
    BATTERY_FULL = 11,
};

// TODO: figure out why double braces are needed here and it causes compilation
// errors without them
// TODO: test and replace all the glyphs with correct ones, current ones are
// mostly placeholders
static const std::array<std::array<uint8_t, 5>, 128> FONT5x7 = {{
    // Custom icons (0-31)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (0)
    {{0x00, 0x00, 0x20, 0x00, 0x00}},  // WiFi weak (1)
    {{0x00, 0x08, 0x28, 0x08, 0x00}},  // WiFi stronger (2)
    {{0x02, 0x0A, 0x2A, 0x0A, 0x02}},  // WiFi full (3)
    {{0x00, 0x08, 0x1C, 0x0E, 0x00}},  // Play ‚ñ∂ (4)
    {{0x1C, 0x1C, 0x1C, 0x1C, 0x00}},  // Pause ‚è∏ (5)
    {{0x3E, 0x22, 0x22, 0x3E, 0x00}},  // Stop ‚èπ (6)
    {{0x08, 0x1C, 0x3E, 0x1C, 0x00}},  // Speaker üîä (7)
    {{0x3C, 0x42, 0x81, 0x81, 0x3C}},  // Battery empty (8)
    {{0x3C, 0x7E, 0x81, 0x81, 0x3C}},  // Battery low (9)
    {{0x3C, 0x7E, 0xFF, 0x81, 0x3C}},  // Battery mid (10)
    {{0x3C, 0x7E, 0xFF, 0xFF, 0x3C}},  // Battery full (11)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (12)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (13)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (14)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (15)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (16)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (17)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (18)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (19)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (20)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (21)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (22)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (23)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (24)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (25)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (26)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (27)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (28)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (29)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (30)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // unused (31)

    // symbols and punctuation (32-47)
    {{0x00, 0x00, 0x00, 0x00, 0x00}},  // ' ' (32)
    {{0x00, 0x00, 0x5F, 0x00, 0x00}},  // '!' (33)
    {{0x00, 0x07, 0x00, 0x07, 0x00}},  // '"' (34)
    {{0x14, 0x7F, 0x14, 0x7F, 0x14}},  // '#' (35)
    {{0x24, 0x2A, 0x7F, 0x2A, 0x12}},  // '$' (36)
    {{0x23, 0x13, 0x08, 0x64, 0x62}},  // '%' (37)
    {{0x36, 0x49, 0x55, 0x22, 0x50}},  // '&' (38)
    {{0x00, 0x05, 0x03, 0x00, 0x00}},  // ''' (39)
    {{0x00, 0x1C, 0x22, 0x41, 0x00}},  // '(' (40)
    {{0x00, 0x41, 0x22, 0x1C, 0x00}},  // ')' (41)
    {{0x14, 0x08, 0x3E, 0x08, 0x14}},  // '*' (42)
    {{0x08, 0x08, 0x3E, 0x08, 0x08}},  // '+' (43)
    {{0x00, 0x50, 0x30, 0x00, 0x00}},  // ',' (44)
    {{0x08, 0x08, 0x08, 0x08, 0x08}},  // '-' (45)
    {{0x00, 0x60, 0x60, 0x00, 0x00}},  // '.' (46)
    {{0x20, 0x10, 0x08, 0x04, 0x02}},  // '/' (47)

    // 0-9 (48-57)
    {{0x3E, 0x51, 0x49, 0x45, 0x3E}},  // '0' (48)
    {{0x00, 0x42, 0x7F, 0x40, 0x00}},  // '1' (49)
    {{0x42, 0x61, 0x51, 0x49, 0x46}},  // '2' (50)
    {{0x21, 0x41, 0x45, 0x4B, 0x31}},  // '3' (51)
    {{0x18, 0x14, 0x12, 0x7F, 0x10}},  // '4' (52)
    {{0x27, 0x45, 0x45, 0x45, 0x39}},  // '5' (53)
    {{0x3C, 0x4A, 0x49, 0x49, 0x30}},  // '6' (54)
    {{0x01, 0x71, 0x09, 0x05, 0x03}},  // '7' (55)
    {{0x36, 0x49, 0x49, 0x49, 0x36}},  // '8' (56)
    {{0x06, 0x49, 0x49, 0x29, 0x1E}},  // '9' (57)

    // punctuation (58-64)
    {{0x00, 0x36, 0x36, 0x00, 0x00}},  // ':' (58)
    {{0x00, 0x56, 0x36, 0x00, 0x00}},  // ';' (59)
    {{0x08, 0x14, 0x22, 0x41, 0x00}},  // '<' (60)
    {{0x14, 0x14, 0x14, 0x14, 0x14}},  // '=' (61)
    {{0x00, 0x41, 0x22, 0x14, 0x08}},  // '>' (62)
    {{0x02, 0x01, 0x51, 0x09, 0x06}},  // '?' (63)
    {{0x32, 0x49, 0x79, 0x41, 0x3E}},  // '@' (64)

    // A-Z (65-90)
    {{0x7E, 0x11, 0x11, 0x11, 0x7E}},  // 'A' (65)
    {{0x7F, 0x49, 0x49, 0x49, 0x36}},  // 'B' (66)
    {{0x3E, 0x41, 0x41, 0x41, 0x22}},  // 'C' (67)
    {{0x7F, 0x41, 0x41, 0x22, 0x1C}},  // 'D' (68)
    {{0x7F, 0x49, 0x49, 0x49, 0x41}},  // 'E' (69)
    {{0x7F, 0x09, 0x09, 0x09, 0x01}},  // 'F' (70)
    {{0x3E, 0x41, 0x49, 0x49, 0x7A}},  // 'G' (71)
    {{0x7F, 0x08, 0x08, 0x08, 0x7F}},  // 'H' (72)
    {{0x00, 0x41, 0x7F, 0x41, 0x00}},  // 'I' (73)
    {{0x20, 0x40, 0x41, 0x3F, 0x01}},  // 'J' (74)
    {{0x7F, 0x08, 0x14, 0x22, 0x41}},  // 'K' (75)
    {{0x7F, 0x40, 0x40, 0x40, 0x40}},  // 'L' (76)
    {{0x7F, 0x02, 0x0C, 0x02, 0x7F}},  // 'M' (77)
    {{0x7F, 0x04, 0x08, 0x10, 0x7F}},  // 'N' (78)
    {{0x3E, 0x41, 0x41, 0x41, 0x3E}},  // 'O' (79)
    {{0x7F, 0x09, 0x09, 0x09, 0x06}},  // 'P' (80)
    {{0x3E, 0x41, 0x51, 0x21, 0x5E}},  // 'Q' (81)
    {{0x7F, 0x09, 0x19, 0x29, 0x46}},  // 'R' (82)
    {{0x46, 0x49, 0x49, 0x49, 0x31}},  // 'S' (83)
    {{0x01, 0x01, 0x7F, 0x01, 0x01}},  // 'T' (84)
    {{0x3F, 0x40, 0x40, 0x40, 0x3F}},  // 'U' (85)
    {{0x1F, 0x20, 0x40, 0x20, 0x1F}},  // 'V' (86)
    {{0x3F, 0x40, 0x38, 0x40, 0x3F}},  // 'W' (87)
    {{0x63, 0x14, 0x08, 0x14, 0x63}},  // 'X' (88)
    {{0x07, 0x08, 0x70, 0x08, 0x07}},  // 'Y' (89)
    {{0x61, 0x51, 0x49, 0x45, 0x43}},  // 'Z' (90)

    // punctuation (91-96)
    {{0x00, 0x7F, 0x41, 0x41, 0x00}},  // '[' (91)
    {{0x02, 0x04, 0x08, 0x10, 0x20}},  // '\' (92)
    {{0x00, 0x41, 0x41, 0x7F, 0x00}},  // ']' (93)
    {{0x04, 0x02, 0x01, 0x02, 0x04}},  // '^' (94)
    {{0x40, 0x40, 0x40, 0x40, 0x40}},  // '_' (95)
    {{0x00, 0x01, 0x02, 0x04, 0x00}},  // '`' (96)

    // a-z (97-122)
    {{0x20, 0x54, 0x54, 0x54, 0x78}},  // 'a' (97)
    {{0x7F, 0x48, 0x44, 0x44, 0x38}},  // 'b' (98)
    {{0x38, 0x44, 0x44, 0x44, 0x20}},  // 'c' (99)
    {{0x38, 0x44, 0x44, 0x48, 0x7F}},  // 'd' (100)
    {{0x38, 0x54, 0x54, 0x54, 0x18}},  // 'e' (101)
    {{0x08, 0x7E, 0x09, 0x01, 0x02}},  // 'f' (102)
    {{0x0C, 0x52, 0x52, 0x52, 0x3E}},  // 'g' (103)
    {{0x7F, 0x08, 0x04, 0x04, 0x78}},  // 'h' (104)
    {{0x00, 0x44, 0x7D, 0x40, 0x00}},  // 'i' (105)
    {{0x20, 0x40, 0x44, 0x3D, 0x00}},  // 'j' (106)
    {{0x7F, 0x10, 0x28, 0x44, 0x00}},  // 'k' (107)
    {{0x00, 0x41, 0x7F, 0x40, 0x00}},  // 'l' (108)
    {{0x78, 0x04, 0x18, 0x04, 0x78}},  // 'm' (109)
    {{0x78, 0x04, 0x04, 0x04, 0x78}},  // 'n' (110)
    {{0x38, 0x44, 0x44, 0x44, 0x38}},  // 'o' (111)
    {{0x7C, 0x14, 0x14, 0x14, 0x08}},  // 'p' (112)
    {{0x08, 0x14, 0x14, 0x18, 0x7C}},  // 'q' (113)
    {{0x7C, 0x08, 0x04, 0x04, 0x08}},  // 'r' (114)
    {{0x48, 0x54, 0x54, 0x54, 0x20}},  // 's' (115)
    {{0x04, 0x3F, 0x44, 0x40, 0x20}},  // 't' (116)
    {{0x3C, 0x40, 0x40, 0x20, 0x7C}},  // 'u' (117)
    {{0x1C, 0x20, 0x40, 0x20, 0x1C}},  // 'v' (118)
    {{0x3C, 0x40, 0x30, 0x40, 0x3C}},  // 'w' (119)
    {{0x44, 0x28, 0x10, 0x28, 0x44}},  // 'x' (120)
    {{0x0C, 0x50, 0x50, 0x50, 0x3C}},  // 'y' (121)
    {{0x44, 0x64, 0x54, 0x4C, 0x44}},  // 'z' (122)

    // punctuation (123-127)
    {{0x00, 0x08, 0x36, 0x41, 0x00}},  // '{' (123)
    {{0x00, 0x00, 0x7F, 0x00, 0x00}},  // '|' (124)
    {{0x00, 0x41, 0x36, 0x08, 0x00}},  // '}' (125)
    {{0x10, 0x08, 0x08, 0x10, 0x08}},  // '~' (126)
    {{0x00, 0x00, 0x00, 0x00, 0x00}}   // DEL (127)
}};

}  // namespace common
